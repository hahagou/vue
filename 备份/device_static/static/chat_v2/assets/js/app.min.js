$(document).ready(function () {
    /*$('#mainNavTab a').on('click',function(e){e.preventDefault()$(this).tab('show')})

    $('#chats-tab').on('click',function(e){e.preventDefault()
    $("body").removeClass("calls-tab-open friends-tab-open profile-tab-open");$("body").addClass("chats-tab-open")})

    $('#calls-tab').on('click',function(e){e.preventDefault()
    $("body").removeClass("chats-tab-open friends-tab-open profile-tab-open");$("body").addClass("calls-tab-open")})

    $('#friends-tab').on('click',function(e){e.preventDefault()
    $("body").removeClass("calls-tab-open chats-tab-open profile-tab-open");$("body").addClass("friends-tab-open")})

    $('#profile-tab').on('click',function(e){e.preventDefault()
    $("body").removeClass("calls-tab-open friends-tab-open chats-tab-open");$("body").addClass("profile-tab-open")})*/

    $('[data-chat-info-toggle]').on('click', function (e) {
        e.preventDefault()
        $(".chat-info").addClass("chat-info-visible")
    })

    $('[data-chat-info-close]').on('click', function (e) {
        e.preventDefault()
        $(".chat-info").removeClass("chat-info-visible")
    })

    $('.contacts-list .contacts-link').on('click', function () {
        $(".main").addClass("main-visible")
    })
    $('.contacts-list .media-link').on('click', function () {
        $(".main").addClass("main-visible")
    })
    $('[data-profile-edit]').on('click', function () {
        $(".main").addClass("main-visible")
    })
    $('[data-close]').on('click', function (e) {
        e.preventDefault()
        $(".main").removeClass("main-visible")
    })
    $('.chat-content').magnificPopup({
        delegate: 'a.popup-media',
        type: 'image',
        gallery: {enabled: !0, navigateByImgClick: !0, preload: [0, 1]}
    });
    $('[data-chat-filter]').on('click', function () {
        let selectedOption = $(this).data('select');
        $('[data-chat-filter-list]').text($(this).text());
        if (selectedOption === 'all-chats') {
            $('[data-chat-list]').find('li').each(function () {
                $(this).show()
            })
        } else {
            $('[data-chat-list]').find('li').each(function () {
                $(this).hide()
            });
            $('[data-chat-list] li.' + selectedOption).show()
        }
    });
    $('[data-call-filter]').on('click', function () {
        let selectedOption = $(this).data('select');
        $('[data-call-filter-list]').text($(this).text());
        if (selectedOption === 'all-calls') {
            $('[data-call-list]').find('li').each(function () {
                $(this).show()
            })
        } else {
            $('[data-call-list]').find('li').each(function () {
                $(this).hide()
            });
            $('[data-call-list] li.' + selectedOption).show()
        }
    });
    $('#createGroup').modalSteps({
        btnNextHtml: "Next",
        btnLastStepHtml: "Finish",
        disableNextButton: !1,
        completeCallback: function () {
        },
        callbacks: {},
        getTitleAndStep: function () {
        }
    });
    $(document).on('change', '.custom-file-input', function (event) {
        $(this).next('.custom-file-label').html(event.target.files[0].name)
    })
    SVGInject(document.getElementsByClassName('injectable'))
})

/*全选*/
$.fn.tableCheck = function (allCheckboxClass) {
    var allCheck = $(this).find("th>.styled-checkbox").find(':checkbox');
    var checks = $(this).find('td>.styled-checkbox').find(':checkbox');
    var defaults = {
        selectedRowClass: "active",
    }
    var settings = $.extend(defaults, allCheckboxClass);
    if (allCheckboxClass)
        settings.selectedRowClass = allCheckboxClass;
    /*所有checkbox初始化*/
    $(this).find('.styled-checkbox').find(":checkbox").prop("checked", false);

    /*全选/反选*/
    allCheck.click(function () {
        var set = $(this).parents('table').find('.styled-checkbox').find(':checkbox');
        if ($(this).prop("checked")) {
            $.each(set, function (i, v) {
                $(v).prop("checked", true);
                $(v).parents('tr').addClass(settings.selectedRowClass);
            });
        } else {
            $.each(set, function (i, v) {
                $(v).prop("checked", false);
                $(v).parents('tr').removeClass(settings.selectedRowClass);
            });
        }
    });

    /* 监听全选事件 */
    checks.click(function (e) {
        e.stopPropagation();//阻止冒泡
        var leng = $(this).parents("table").find('td>.styled-checkbox').find(':checkbox:checked').length;
        /*勾选后该行active*/
        if ($(this).prop('checked')) {
            $(this).parents('tr').addClass(settings.selectedRowClass);
        } else {
            $(this).parents('tr').removeClass(settings.selectedRowClass);
        }
        if (leng == checks.length) {
            allCheck.prop('checked', true);
        } else {
            allCheck.prop("checked", false);
        }
    });

    /* 点击table触发复选框 */
    $(this).find("td").click(function () {
        var _tr = $(this).parents('tr>.styled-checkbox');
        _tr.find(":checkbox").trigger("click");
    });
}

$(function () {
    $("#table_dis").tableCheck("warning");

    $("input:checkbox").click(function () {
        setTimeout(function () {
            var num = $("input[name='cb[]']:checked").length;
            $('#check-all-num').html(num);
            $('#check-num').show(200);
        }, "200");
    });
});


